<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Radial Pattern Explorer â€” React + D3</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <script type="importmap">
      {
        "imports": {
          "react": "https://esm.sh/react@18.2.0",
          "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
          "d3": "https://esm.sh/d3@7"
        }
      }
    </script>

    <script type="module" src="https://esm.sh/tsx"></script>

    <style>
      body {
        margin: 0;
        font-family: system-ui, sans-serif;
        background: #0f1724;
        color: #e6eef6;
        display: flex;
        height: 100vh;
      }
      #root {
        display: flex;
        flex: 1;
        padding: 12px;
        gap: 12px;
      }
      .panel {
        width: 280px;
        background: rgba(255,255,255,0.05);
        border-radius: 10px;
        padding: 12px;
      }
      .canvas {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      input[type=range] { width: 100%; }
      label { display: block; margin-top: 10px; font-size: 13px; color: #9aa4b2; }
      select, button { width: 100%; margin-top: 8px; padding: 6px; border-radius: 6px; border: none; background: #1a263f; color: white; }
      button:hover { background: #24365a; cursor: pointer; }
    </style>
  </head>

  <body>
    <div id="root"></div>

    <script type="text/babel">
      import React, { useState, useEffect } from "react";
      import { createRoot } from "react-dom/client";
      import * as d3 from "d3";

      function App() {
        const width = 800, height = 600;
        const [center, setCenter] = useState([width / 2, height / 2]);
        const [radius, setRadius] = useState(150);
        const [count, setCount] = useState(12);
        const [shape, setShape] = useState("dot");

        const points = React.useMemo(() => {
          const [cx, cy] = center;
          return d3.range(count).map(i => {
            const angle = (2 * Math.PI / count) * i;
            return {
              x: cx + radius * Math.cos(angle),
              y: cy + radius * Math.sin(angle)
            };
          });
        }, [center, radius, count]);

        function handleClick(e) {
          const rect = e.currentTarget.getBoundingClientRect();
          setCenter([e.clientX - rect.left, e.clientY - rect.top]);
        }

        return (
          <div style={{ display: "flex", flex: 1 }}>
            <div className="panel">
              <h3>Radial Pattern Explorer</h3>
              <p style={{ fontSize: "12px", color: "#9aa4b2" }}>Click canvas to move center</p>

              <label>
                Radius: {radius}
                <input
                  type="range"
                  min="10"
                  max="400"
                  value={radius}
                  onChange={e => setRadius(+e.target.value)}
                />
              </label>

              <label>
                Count: {count}
                <input
                  type="range"
                  min="1"
                  max="128"
                  value={count}
                  onChange={e => setCount(+e.target.value)}
                />
              </label>

              <label>
                Shape:
                <select value={shape} onChange={e => setShape(e.target.value)}>
                  <option value="dot">Dot</option>
                  <option value="line">Line</option>
                  <option value="circle">Circle</option>
                </select>
              </label>
            </div>

            <div className="canvas">
              <svg
                width={width}
                height={height}
                viewBox={`0 0 ${width} ${height}`}
                style={{ background: "#071026", borderRadius: 8 }}
                onClick={handleClick}
              >
                <rect width={width} height={height} fill="#071026" rx="8" />
                {shape === "line" &&
                  points.map((p, i) => (
                    <line
                      key={i}
                      x1={center[0]}
                      y1={center[1]}
                      x2={p.x}
                      y2={p.y}
                      stroke="#6ee7b7"
                      strokeWidth="2"
                      strokeLinecap="round"
                    />
                  ))}
                {shape === "dot" &&
                  points.map((p, i) => (
                    <circle key={i} cx={p.x} cy={p.y} r="6" fill="#6ee7b7" />
                  ))}
                {shape === "circle" &&
                  points.map((p, i) => (
                    <circle
                      key={i}
                      cx={p.x}
                      cy={p.y}
                      r="20"
                      fill="none"
                      stroke="#6ee7b7"
                      strokeWidth="2"
                    />
                  ))}
                <circle cx={center[0]} cy={center[1]} r="5" fill="#ff7b7b" />
              </svg>
            </div>
          </div>
        );
      }

      createRoot(document.getElementById("root")).render(<App />);
    </script>
  </body>
</html>

